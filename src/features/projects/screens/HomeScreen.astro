---
import type { LanguageCode } from '@/i18n/ui';
import Heading from '@/components/Heading.astro';
import { buttonVariants } from '@/components/ui/button';
import { getRelativeLocaleUrl } from 'astro:i18n';
import SkillCard from '@/components/SkillCard.astro';
import { Calendar, Dumbbell } from "lucide-react";


import type { TranslatedProject, TranslatedSkill } from '../service';
import ProjectCard from '../components/ProjectCard.astro';

export type Props = {
  lang: LanguageCode;
  projects: Array<TranslatedProject>;
  skills: Array<TranslatedSkill>;
  heroGreeting: string;
  heroSubtitlePart1: string;
  heroSubtitlePart2: string;
  heroIntroduction: string;
  heroViewWorkButton: string;
  heroContactButton: string;
  imageNotAvailable: string;
  featuredProjectsTitle: string;
  featuredProjectsDescription: string;
  mySkillsTitle: string;
  mySkillsDescription: string;
};

const { 
  lang, 
  projects, 
  skills,
  heroGreeting,
  heroSubtitlePart1,
  heroSubtitlePart2,
  heroIntroduction,
  heroViewWorkButton,
  heroContactButton,
  imageNotAvailable,
  featuredProjectsTitle,
  featuredProjectsDescription,
  mySkillsTitle,
  mySkillsDescription
} = Astro.props;
---

<section class="py-16 md:py-24">
  <div class="container mx-auto px-4">
    <div class="grid md:grid-cols-2 gap-12 items-center">
      {/* Colonne de Texte */} 
      <div class="text-center md:text-left">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-4">
          {heroGreeting}
        </h1>
        <p class="text-2xl md:text-3xl font-medium text-muted-foreground mb-2">
          <span>{heroSubtitlePart1}</span>
          <span class="text-primary"> | </span>
          <span>{heroSubtitlePart2}</span>
        </p>
        <p class="text-lg text-muted-foreground mb-8">
          {heroIntroduction}
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
          <a href="#projects" class={buttonVariants({ variant: 'default', size: 'lg' })}>
            <Dumbbell className="mr-2 size-4" />
            {heroViewWorkButton}
          </a>
          <a href={getRelativeLocaleUrl(lang, '/contact')} class={buttonVariants({ variant: 'outline', size: 'lg' })}>
            <Calendar className="mr-2 size-4" />
            {heroContactButton}
          </a>
        </div>
      </div>

      {/* Colonne de l'Image (Placeholder pour l'instant) */} 
      <div class="hidden md:block text-center">
        <div class="w-full max-w-md h-96 bg-muted rounded-lg shadow-xl mx-auto flex items-center justify-center">
          <p class="text-muted-foreground">{imageNotAvailable}</p>
        </div>
      </div>
    </div>
  </div>
</section>

{/* Section Projets Phares */}
<section id="projects" class="py-16 md:py-24 bg-muted/20 dark:bg-muted/10">
  <div class="container mx-auto px-4">
    <Heading
      title={featuredProjectsTitle}
      description={featuredProjectsDescription}
      className="text-center"
    />
  
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {projects.slice(0, 3).map((project: TranslatedProject) => (
        <ProjectCard
          title={project.title}
          description={project.description}
          imageUrl={project.imageUrl}
          imageAltText={project.imageAltText}
          projectUrl={project.projectUrl}
          codeUrl={project.codeUrl}
          tags={project.tags}
        />
      ))}
    </div>
  </div>
</section>

{/* Section Mes Comp√©tences */}
<section id="skills" class="py-16 md:py-24">
  <div class="container mx-auto px-4">
    <Heading
      title={mySkillsTitle}
      description={mySkillsDescription}
      className="text-center"
    />
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {skills.map(skill => (
        <SkillCard
          title={skill.title}
          description={skill.description}
          iconName={skill.iconName}
          technologies={skill.technologies}
        />
      ))}
    </div>
  </div>
</section>
