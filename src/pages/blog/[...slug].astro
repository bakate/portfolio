---
import { getCollection, render, type CollectionEntry } from 'astro:content';
import {BlogPostDetailScreen} from '@/features/blog';
import { type LanguageCode } from '@/i18n/ui';

let lang =  "fr" as LanguageCode;

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog', ({data}) => {
    return data.isDraft !== true && data.lang === "fr";
  });
  return blogEntries.map(post => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---
<BlogPostDetailScreen 
  post={post.data} 
  lang={lang} 
>
  <Content />
</BlogPostDetailScreen>